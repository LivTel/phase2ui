/*
 * EphemerisTimingConstraintEditorPanel.java
 *
 * Created on April 17, 2009, 2:07 PM
 */

package ngat.oss.client.gui.panel.target;

import ngat.oss.client.gui.dialog.InputEphemerisTargetDialog;
import ngat.oss.client.gui.dialog.DisplayEphemerisTargetDialog;
import ngat.oss.client.gui.util.LimitedCharactersDocument;
import ngat.phase2.ITarget;
import ngat.phase2.XEphemerisTarget;

/**
 *
 * @author  nrc
 */
public class EphemerisTargetEditorPanel extends javax.swing.JPanel {

    private boolean enabled;
    private long originalEphemerisTargetID;
    private XEphemerisTarget ephemerisTarget = null;
    
    /** Creates new form EphemerisTimingConstraintEditorPanel */
    public EphemerisTargetEditorPanel(XEphemerisTarget originalEphemerisTarget) {
        this.ephemerisTarget = originalEphemerisTarget;
        this.originalEphemerisTargetID = originalEphemerisTarget.getID();
        
        initComponents();

        jtfTargetName.setDocument(new LimitedCharactersDocument(LimitedCharactersDocument.STRICT_LIMITATION));
        
        populateComponents();
    }

    private void populateComponents() {
        jtfTargetName.setText(ephemerisTarget.getName());
    }
    
    public boolean containsValidTarget() {
        return (jtfTargetName.getText().trim().length() != 0);
    }
            
    public ITarget getTarget() throws Exception {
        String targetName = jtfTargetName.getText().trim();
        ephemerisTarget.setName(targetName);
        return ephemerisTarget;
    }
    
    public boolean isEnabled() {
        return enabled;
    }

    public void setEnabled(boolean enabled) {
        this.enabled = enabled;
        
        jtfTargetName.setEnabled(enabled);
        jbtnViewTarget.setEnabled(enabled);
        jbtnNewTarget.setEnabled(enabled);

    }
    
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jbtnNewTarget = new javax.swing.JButton();
        jtfTargetName = new javax.swing.JTextField();
        jLabel1 = new javax.swing.JLabel();
        jbtnViewTarget = new javax.swing.JButton();

        jbtnNewTarget.setText("New Target");
        jbtnNewTarget.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jbtnNewTargetActionPerformed(evt);
            }
        });

        jLabel1.setText("Target Name: ");

        jbtnViewTarget.setText("View Target");
        jbtnViewTarget.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jbtnViewTargetActionPerformed(evt);
            }
        });

        org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(layout.createSequentialGroup()
                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                    .add(layout.createSequentialGroup()
                        .add(14, 14, 14)
                        .add(jLabel1)
                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                        .add(jtfTargetName, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 159, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                    .add(layout.createSequentialGroup()
                        .add(jbtnViewTarget)
                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                        .add(jbtnNewTarget)))
                .addContainerGap(151, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(layout.createSequentialGroup()
                .add(6, 6, 6)
                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
                    .add(jtfTargetName, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                    .add(jLabel1))
                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
                    .add(jbtnNewTarget)
                    .add(jbtnViewTarget))
                .addContainerGap(52, Short.MAX_VALUE))
        );
    }// </editor-fold>//GEN-END:initComponents

private void jbtnNewTargetActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jbtnNewTargetActionPerformed
    InputEphemerisTargetDialog inputEphemerisTargetDialog = InputEphemerisTargetDialog.getInstance();
    inputEphemerisTargetDialog.setVisible(true);

    //blocks

    //set the class variable 
    ephemerisTarget = (XEphemerisTarget) inputEphemerisTargetDialog.getTarget();
    if (ephemerisTarget == null) {
        return;
    }
    ephemerisTarget.setID(originalEphemerisTargetID);
    
    inputEphemerisTargetDialog.setVisible(false);
    inputEphemerisTargetDialog.dispose();
}//GEN-LAST:event_jbtnNewTargetActionPerformed

private void jbtnViewTargetActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jbtnViewTargetActionPerformed
    DisplayEphemerisTargetDialog  displayEphemerisTargetDialog = new DisplayEphemerisTargetDialog(ephemerisTarget);
    displayEphemerisTargetDialog.setVisible(true);

    //blocks

    displayEphemerisTargetDialog.setVisible(false);
    displayEphemerisTargetDialog.dispose();
}//GEN-LAST:event_jbtnViewTargetActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel jLabel1;
    private javax.swing.JButton jbtnNewTarget;
    private javax.swing.JButton jbtnViewTarget;
    private javax.swing.JTextField jtfTargetName;
    // End of variables declaration//GEN-END:variables

}
